require './vendor/otoge_burn/notes'

total_notes = []

total_notes << Notes.new('notes0', 91, :d)
total_notes << Notes.new('notes1', 100, :r)
total_notes << Notes.new('notes2', 109, :f)
total_notes << Notes.new('notes3', 124, :u)
total_notes << Notes.new('notes4', 140, :k)
total_notes << Notes.new('notes5', 151, :i)
total_notes << Notes.new('notes6', 161, :j)
total_notes << Notes.new('notes7', 169, :u)
total_notes << Notes.new('notes8', 181, :d)
total_notes << Notes.new('notes9', 190, :r)
total_notes << Notes.new('notes10', 198, :f)
total_notes << Notes.new('notes11', 206, :u)
total_notes << Notes.new('notes12', 210, :j)
total_notes << Notes.new('notes13', 239, :i)
total_notes << Notes.new('notes14', 254, :k)
total_notes << Notes.new('notes15', 261, :i)
total_notes << Notes.new('notes16', 266, :d)
total_notes << Notes.new('notes17', 268, :f)
total_notes << Notes.new('notes18', 271, :j)
total_notes << Notes.new('notes19', 273, :k)
total_notes << Notes.new('notes20', 311, :k)
total_notes << Notes.new('notes21', 313, :j)
total_notes << Notes.new('notes22', 315, :f)
total_notes << Notes.new('notes23', 318, :d)
total_notes << Notes.new('notes24', 330, :q)
total_notes << Notes.new('notes25', 338, :q)
total_notes << Notes.new('notes26', 353, :d)
total_notes << Notes.new('notes27', 356, :f)
total_notes << Notes.new('notes28', 358, :j)
total_notes << Notes.new('notes29', 362, :k)
total_notes << Notes.new('notes30', 398, :i)
total_notes << Notes.new('notes31', 406, :u)
total_notes << Notes.new('notes32', 415, :r)
total_notes << Notes.new('notes33', 442, :d)
total_notes << Notes.new('notes34', 444, :j)
total_notes << Notes.new('notes35', 449, :k)
total_notes << Notes.new('notes36', 485, :k)
total_notes << Notes.new('notes37', 488, :j)
total_notes << Notes.new('notes38', 490, :f)
total_notes << Notes.new('notes39', 491, :d)
total_notes << Notes.new('notes40', 501, :q)
total_notes << Notes.new('notes41', 509, :q)
total_notes << Notes.new('notes42', 525, :d)
total_notes << Notes.new('notes43', 527, :f)
total_notes << Notes.new('notes44', 529, :j)
total_notes << Notes.new('notes45', 533, :k)
total_notes << Notes.new('notes46', 568, :i)
total_notes << Notes.new('notes47', 574, :u)
total_notes << Notes.new('notes48', 586, :r) #
total_notes << Notes.new('notes49', 606, :r)
total_notes << Notes.new('notes50', 632, :r)
total_notes << Notes.new('notes51', 672, :r)
total_notes << Notes.new('notes52', 676, :r)
total_notes << Notes.new('notes53', 710, :r)
total_notes << Notes.new('notes54', 731, :u)
total_notes << Notes.new('notes55', 723, :i)
total_notes << Notes.new('notes56', 735, :k)
total_notes << Notes.new('notes57', 745, :j)
total_notes << Notes.new('notes58', 770, :q) #
total_notes << Notes.new('notes59', 777, :q)
total_notes << Notes.new('notes60', 782, :q)
total_notes << Notes.new('notes61', 803, :j)
total_notes << Notes.new('notes62', 805, :d)
total_notes << Notes.new('notes63', 808, :j)
total_notes << Notes.new('notes64', 809, :d)
total_notes << Notes.new('notes65', 811, :j)
total_notes << Notes.new('notes66', 813, :d)
total_notes << Notes.new('notes67', 829, :k)
total_notes << Notes.new('notes68', 831, :f)
total_notes << Notes.new('notes69', 834, :k)
total_notes << Notes.new('notes70', 835, :f)
total_notes << Notes.new('notes71', 837, :k)
total_notes << Notes.new('notes72', 838, :f)
total_notes << Notes.new('notes73', 854, :i)
total_notes << Notes.new('notes74', 856, :r)
total_notes << Notes.new('notes75', 858, :i)
total_notes << Notes.new('notes76', 860, :r)
total_notes << Notes.new('notes77', 862, :i)
total_notes << Notes.new('notes78', 864, :r)
total_notes << Notes.new('notes79', 878, :u)
total_notes << Notes.new('notes80', 881, :d)
total_notes << Notes.new('notes81', 884, :u)
total_notes << Notes.new('notes82', 887, :d)
total_notes << Notes.new('notes83', 889, :u)
total_notes << Notes.new('notes84', 891, :d)
total_notes << Notes.new('notes85', 903, :q)
total_notes << Notes.new('notes86', 914, :r)
total_notes << Notes.new('notes87', 922, :u)
total_notes << Notes.new('notes88', 938, :i)
total_notes << Notes.new('notes89', 945, :k)
total_notes << Notes.new('notes90', 949, :j)
total_notes << Notes.new('notes91', 954, :f)
total_notes << Notes.new('notes92', 957, :d)
total_notes << Notes.new('notes93', 967, :q)
total_notes << Notes.new('notes94', 985, :d)
total_notes << Notes.new('notes95', 1020, :r)
total_notes << Notes.new('notes96', 1028, :f)
total_notes << Notes.new('notes97', 1031, :u)
total_notes << Notes.new('notes98', 1042, :j)
total_notes << Notes.new('notes99', 1051, :i)
total_notes << Notes.new('notes0', 1022, :k)
total_notes << Notes.new('notes1', 1031, :i)
total_notes << Notes.new('notes2', 1039, :j)
total_notes << Notes.new('notes3', 1044, :u)
total_notes << Notes.new('notes4', 1053, :f)
total_notes << Notes.new('notes5', 1061, :r)
total_notes << Notes.new('notes6', 1074, :q)
total_notes << Notes.new('notes7', 1078, :q)
total_notes << Notes.new('notes8', 1083, :q)
total_notes << Notes.new('notes9', 1134, :d)
total_notes << Notes.new('notes10', 1170, :r)
total_notes << Notes.new('notes11', 1172, :u)
total_notes << Notes.new('notes12', 1173, :d)
total_notes << Notes.new('notes13', 1175, :k)
total_notes << Notes.new('notes14', 1176, :r)
total_notes << Notes.new('notes15', 1180, :i)
total_notes << Notes.new('notes16', 1184, :j)
total_notes << Notes.new('notes17', 1185, :f)
total_notes << Notes.new('notes18', 1187, :d)
total_notes << Notes.new('notes19', 1188, :d)
total_notes << Notes.new('notes20', 1189, :i)
total_notes << Notes.new('notes21', 1190, :r)
total_notes << Notes.new('notes22', 1193, :j)
total_notes << Notes.new('notes23', 1194, :f)
total_notes << Notes.new('notes24', 1196, :k)
total_notes << Notes.new('notes25', 1197, :d)
total_notes << Notes.new('notes26', 1198, :i)
total_notes << Notes.new('notes27', 1200, :r)
total_notes << Notes.new('notes28', 1201, :j)
total_notes << Notes.new('notes29', 1202, :f)
total_notes << Notes.new('notes30', 1203, :u)
total_notes << Notes.new('notes31', 1205, :d)
total_notes << Notes.new('notes32', 1207, :k)
total_notes << Notes.new('notes33', 1208, :r)
total_notes << Notes.new('notes34', 1209, :i)
total_notes << Notes.new('notes35', 1210, :f)
total_notes << Notes.new('notes36', 1211, :j)
total_notes << Notes.new('notes37', 1213, :u)
total_notes << Notes.new('notes38', 1216, :d)
total_notes << Notes.new('notes39', 1218, :r)
total_notes << Notes.new('notes40', 1222, :q)
total_notes << Notes.new('notes41', 1244, :d)
total_notes << Notes.new('notes42', 1246, :r)
total_notes << Notes.new('notes43', 1247, :f)
total_notes << Notes.new('notes44', 1249, :u)
total_notes << Notes.new('notes45', 1250, :i)
total_notes << Notes.new('notes46', 1253, :i)
total_notes << Notes.new('notes47', 1254, :k)
total_notes << Notes.new('notes48', 1257, :k)
total_notes << Notes.new('notes49', 1261, :k)
total_notes << Notes.new('notes50', 1262, :i)
total_notes << Notes.new('notes51', 1265, :i)
total_notes << Notes.new('notes52', 1266, :r)
total_notes << Notes.new('notes53', 1268, :d)
total_notes << Notes.new('notes54', 1272, :d)
total_notes << Notes.new('notes55', 1276, :d)
total_notes << Notes.new('notes56', 1277, :r)
total_notes << Notes.new('notes57', 1278, :f)
total_notes << Notes.new('notes58', 1280, :u)
total_notes << Notes.new('notes59', 1281, :i)
total_notes << Notes.new('notes60', 1284, :k)
total_notes << Notes.new('notes61', 1289, :k)
total_notes << Notes.new('notes62', 1278, :i)
total_notes << Notes.new('notes63', 1290, :j)

window_height = 20

code = total_notes.inject('') { |sum, notes| sum += notes.behave window_height }
visible_notes = 100

config :app do
  target :telnet
  user_input :enable
  height window_height
  frame_rate 0.0001 / visible_notes
end

declare do
  white_notes '---'
  blue_notes '|||'
  red_notes '🍣'
  blanket '　'
  blank ''
  notes0 ''
  notes1 ''
  notes2 ''
  notes3 ''
  notes4 ''
  notes5 ''
  notes6 ''
  notes7 ''
  notes8 ''
  notes9 ''
  notes10 ''
  notes11 ''
  notes12 ''
  notes13 ''
  notes14 ''
  notes15 ''
  notes16 ''
  notes17 ''
  notes18 ''
  notes19 ''
  notes20 ''
  notes21 ''
  notes22 ''
  notes23 ''
  notes24 ''
  notes25 ''
  notes26 ''
  notes27 ''
  notes28 ''
  notes29 ''
  notes30 ''
  notes31 ''
  notes32 ''
  notes33 ''
  notes34 ''
  notes35 ''
  notes36 ''
  notes37 ''
  notes38 ''
  notes39 ''
  notes40 ''
  notes41 ''
  notes42 ''
  notes43 ''
  notes44 ''
  notes45 ''
  notes46 ''
  notes47 ''
  notes48 ''
  notes49 ''
  notes50 ''
  notes51 ''
  notes52 ''
  notes53 ''
  notes54 ''
  notes55 ''
  notes56 ''
  notes57 ''
  notes58 ''
  notes59 ''
  notes60 ''
  notes61 ''
  notes62 ''
  notes63 ''
  notes64 ''
  notes65 ''
  notes66 ''
  notes67 ''
  notes68 ''
  notes69 ''
  notes70 ''
  notes71 ''
  notes72 ''
  notes73 ''
  notes74 ''
  notes75 ''
  notes76 ''
  notes77 ''
  notes78 ''
  notes79 ''
  notes80 ''
  notes81 ''
  notes82 ''
  notes83 ''
  notes84 ''
  notes85 ''
  notes86 ''
  notes87 ''
  notes88 ''
  notes89 ''
  notes90 ''
  notes91 ''
  notes92 ''
  notes93 ''
  notes94 ''
  notes95 ''
  notes96 ''
  notes97 ''
  notes98 ''
  notes99 ''

  frame 0
  combo '0'
  score '0'
  timing ''

  finale <<EOH

🍣🍣🍣🍣🍣   🍣🍣   🍣🍣   🍣🍣🍣🍣
🍣🍣      🍣🍣🍣  🍣🍣   🍣🍣 🍣🍣
🍣🍣🍣🍣🍣   🍣🍣 🍣 🍣🍣   🍣🍣  🍣🍣
🍣🍣      🍣🍣  🍣🍣🍣   🍣🍣 🍣🍣
🍣🍣🍣🍣🍣   🍣🍣   🍣🍣   🍣🍣🍣🍣

EOH
end

scene do
  label "combo", 60, 10
  label "score: ", 50, 12
  label "--------------------------------------", 0, 17
  main_loop <<EOH
    if (frame.zero?) then
      sprite "white_notes"
      sprite "blue_notes"
      sprite "red_notes"
      sprite "blanket"
      sprite "blank"
      count = 0

      combo.x = 50
      combo.y = 10
      sprite "combo"
      score.x = 60
      score.y = 12
      sprite "score"
      timing.x = 49
      timing.y = 14
      sprite "timing"
    end

    #{code}

    frame+=1

    if is_pressed(:q) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :q)"
      count+=1
    end
    if is_pressed(:d) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :d)"
      count+=1
    end
    if is_pressed(:r) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :r)"
      count+=1
    end
    if is_pressed(:f) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :f)"
      count+=1
    end
    if is_pressed(:u) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :u)"
      count+=1
    end
    if is_pressed(:j) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :j)"
      count+=1
    end
    if is_pressed(:i) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :i)"
      count+=1
    end
    if is_pressed(:k) then
      puts "total_notes << Notes.new('notes" + count.to_s + "', " + (frame - #{window_height}).to_s + ", :k)"
      count+=1
    end
    if count%#{visible_notes}==0 then
      count = 0
    end


    if frame==1330 then
      sprite "finale"
      finale.x = 5
    end

    if frame>=1330 && frame<1340
      finale.y += 1
    end
EOH
end

